import{r as p,G as k,j as e,x as C}from"./app-NUb6NQg-.js";import{I as x}from"./InputError-BTJGKyJ4.js";import{T as D}from"./TextInput-6iaJARMZ.js";import{A as I}from"./AuthenticatedLayout-DncdzVuS.js";import{S as J}from"./react-select.esm-D4rf1DDC.js";import"./sima-DtxtMQ44.js";import"./objectWithoutProperties-Bdmk7Y0b.js";const q=({auth:b,spp:r,siswas:u})=>{const[h,j]=p.useState({value:r.siswa.id,label:r.siswa.nama_siswa}),[g,S]=p.useState(),[l,f]=p.useState(()=>JSON.parse(r.data_spp));p.useEffect(()=>{const s=u.map(t=>({value:t.id,label:t.nama_siswa}));d({id_siswa:r.siswa.id,nominal_spp:r.nominal_spp,data_spp:JSON.stringify(l)}),S(s)},[l,u]);const{data:v,setData:d,put:w,errors:c,reset:_,processing:N}=k({id_siswa:"",nominal_spp:"",data_spp:l}),y=s=>{s.preventDefault(),w(route("spp.update",r.id),{onSuccess:()=>{_("id_siswa","nominal_spp","data_spp"),localStorage.setItem("pag",10)}})},O=s=>{j(s),d("id_siswa",s.value)},$=(s,t,n)=>{f(o=>o.map(a=>Object.keys(a)[0]===s?{...a,[s]:a[s].map(i=>({...i,[t]:n?"lunas":null}))}:a)),d("data_spp",JSON.stringify(l))};return e.jsx(I,{user:b,children:e.jsx("div",{className:"mx-6 grid grid-cols-1 xl:grid-cols-1 grid-rows-1 grid-flow-row-dense ",children:e.jsx("div",{className:"xl:col-span-2",children:e.jsxs("div",{className:"card h-full shadow mb-4",children:[e.jsx("div",{className:"border-b border-gray-300 px-5 py-4 mb-3",children:e.jsx("h4",{children:"Edit Data SPP"})}),e.jsx("div",{className:"relative overflow-x-auto mt-3 mb-4 ",children:e.jsxs("form",{className:"mx-5 grid md:w-2/5",onSubmit:y,children:[e.jsx(J,{options:g,placeholder:"Pilih Siswa",value:h,onChange:O,isSearchable:!0,className:"mb-3",isDisabled:!0}),e.jsx(x,{message:c.id_siswa??"",className:"mb-3 -mt-1"}),e.jsx(D,{type:"number",placeholder:"Nominal SPP",value:v.nominal_spp,onChange:s=>d("nominal_spp",s.target.value),disabled:!0}),e.jsx(x,{message:c.nominal_spp??"",className:"mt-2"}),e.jsx("label",{className:"my-2",children:"Data SPP"}),e.jsx("div",{className:"flex justify-between",children:l.map((s,t)=>Object.keys(s).map((n,o)=>s[n].map((a,m)=>e.jsxs("div",{children:[e.jsx("h5",{children:n}),Object.keys(a).map((i,P)=>e.jsxs("p",{children:[e.jsx("input",{type:"checkbox",checked:a[i]==="lunas",onChange:E=>$(n,i,E.target.checked),className:"mr-2"}),i,": ",a[i]]},`${t}-${o}-${m}-${P}`))]},`${t}-${o}-${m}`))))}),e.jsxs("div",{className:"flex justify-between "+(c.data_spp?"":"mt-3"),children:[e.jsx(C,{href:route("spp.index"),className:"bg-violet-300 hover:bg-violet-200 py-2 no-underline hover:text-gray-700 px-3 rounded text-black font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N,className:"bg-blue-600 hover:bg-blue-500 py-2 no-underline hover:text-gray-700 px-3 rounded text-white font-medium ",children:"Update"})]})]})})]})})})})};export{q as default};
