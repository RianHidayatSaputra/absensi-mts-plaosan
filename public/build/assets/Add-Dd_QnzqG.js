import{r as c,G as y,j as s,S as C}from"./app-NUb6NQg-.js";import{C as v,S as A,a as F}from"./index-DU9Muqs7.js";import{I as p}from"./InputError-BTJGKyJ4.js";import{A as D,F as K,f as L}from"./AuthenticatedLayout-DncdzVuS.js";import"./useIcons-bGyIZvFo.js";import"./objectWithoutProperties-Bdmk7Y0b.js";import"./sima-DtxtMQ44.js";const q=({auth:f,kelas:o})=>{const[r,h]=c.useState([]),[m,g]=c.useState(""),j=(e,l)=>{h(t=>{if(!e)return t.filter(i=>i.idkelas!==l.id);const a=l.siswa.map(i=>({id:i.id,nama_siswa:i.nama_siswa})),d=t.findIndex(i=>i.idkelas===l.id);let n=[...t];return d>=0?n[d].siswa=a:n.push({idkelas:l.id,siswa:a}),n})},b=(e,l)=>{h(t=>{const a=l.siswa.filter(i=>e.includes(i.nama_siswa)).map(i=>({id:i.id,nama_siswa:i.nama_siswa})),d=t.findIndex(i=>i.idkelas===l.id);let n=[...t];return d>=0?n[d].siswa=a:n.push({idkelas:l.id,siswa:a}),n})},x=e=>{g(e)},{setData:u,post:N,errors:w,reset:_,processing:k}=y({data_fe:[],id_ke_kelas:""}),S=e=>{e.preventDefault(),N(route("pindah-kelas.store"),{onSuccess:()=>_("data_fe")})};return c.useEffect(()=>{u("data_fe",r),u("id_ke_kelas",m.toString())},[r,m]),s.jsxs(D,{user:f,children:[s.jsx(C,{title:"Absen Siswa Manual"}),s.jsx("div",{className:"mx-6 grid grid-cols-1 xl:grid-cols-1 grid-rows-1 grid-flow-row-dense ",children:s.jsx("div",{className:"xl:col-span-2",children:s.jsxs("div",{className:"card h-full shadow mb-4",children:[s.jsx("div",{className:"border-b border-gray-300 px-5 py-4",children:s.jsx("h4",{children:"Pindah Kelas"})}),s.jsxs("form",{onSubmit:S,children:[s.jsxs("div",{className:"relative flex flex-row overflow-x-auto mt-3 mb-4 justify-between ",children:[s.jsxs("div",{className:"ml-7 grid md:w-2/5",children:[s.jsx("label",{htmlFor:"withLabel",className:" block text-gray-600 mt-3",children:"Dari Kelas"}),o.map((e,l)=>{var t;return e.siswa.map(a=>({label:a.nama_siswa,value:a.nama_siswa})),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex mt-3",children:[s.jsx(v,{className:"mr-2",checked:e.siswa.length>0&&r.find(a=>a.idkelas===e.id&&a.siswa.length===e.siswa.length),disabled:e.siswa.length===0,onChange:a=>j(a.target.checked,e)}),s.jsx(A,{style:{width:"100%"},direction:"vertical",children:s.jsx(F,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:e.nama_kelas,options:e.siswa.map(a=>({label:a.nama_siswa,value:a.nama_siswa})),value:((t=r.find(a=>a.idkelas===e.id))==null?void 0:t.siswa.map(a=>a.nama_siswa))||[],onChange:a=>b(a,e)})})]},l)})}),s.jsx(p,{message:w.status??"",className:"mt-2 mb-4"})]}),s.jsx("div",{className:" flex items-center",children:s.jsx(K,{icon:L,className:"text-4xl"})}),s.jsx("div",{className:"mr-9 flex md:w-2/5",children:s.jsxs("div",{className:"grid w-full",children:[s.jsx("label",{htmlFor:"withLabel",className:" block text-gray-600 mt-3",children:"Ke Kelas"}),o.map((e,l)=>(e.siswa.map(t=>({label:t.nama_siswa,value:t.nama_siswa})),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex mt-3",children:[s.jsx("input",{type:"radio",className:"mr-1 mt-[2px]",value:e.id,checked:m===e.id,onChange:()=>x(e.id)}),s.jsx("p",{children:e.nama_kelas})]})}))),s.jsxs("div",{className:"flex mt-3",children:[s.jsx("input",{type:"radio",className:"mr-1 mt-[2px]",value:"alumni",checked:m=="alumni",onChange:()=>x("alumni")}),s.jsx("p",{children:"Alumni"})]}),s.jsx(p,{message:w.status??"",className:"mt-2 mb-4"})]})})]}),s.jsx("button",{type:"submit",disabled:k,className:"bg-blue-600 hover:bg-blue-500 py-2 no-underline hover:text-gray-700 px-3 rounded float-right mr-10 text-white font-medium ",children:"Submit"})]})]})})})]})};export{q as default};
