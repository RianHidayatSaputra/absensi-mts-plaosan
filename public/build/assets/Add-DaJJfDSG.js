import{r as u,G as I,j as e,x as P}from"./app-NUb6NQg-.js";import{I as c}from"./InputError-BTJGKyJ4.js";import{T as C}from"./TextInput-6iaJARMZ.js";import{A as E}from"./AuthenticatedLayout-DncdzVuS.js";import{S as J}from"./react-select.esm-D4rf1DDC.js";import"./sima-DtxtMQ44.js";import"./objectWithoutProperties-Bdmk7Y0b.js";const R=({auth:b,siswas:d})=>{const[x,j]=u.useState(),[h,g]=u.useState(),[t,f]=u.useState(()=>JSON.parse(JSON.stringify([{X:[{juli:null,agustus:null,september:null,oktober:null,november:null,desember:null,januari:null,februari:null,maret:null,april:null,mei:null,juni:null}]},{XI:[{juli:null,agustus:null,september:null,oktober:null,november:null,desember:null,januari:null,februari:null,maret:null,april:null,mei:null,juni:null}]},{XII:[{juli:null,agustus:null,september:null,oktober:null,november:null,desember:null,januari:null,februari:null,maret:null,april:null,mei:null,juni:null}]}]))),{data:S,setData:o,post:v,errors:m,reset:N,processing:y}=I({id_siswa:"",nominal_spp:"",data_spp:JSON.stringify(t)});u.useEffect(()=>{const l=d.map(a=>({value:a.id,label:a.nama_siswa}));g(l),o("data_spp",JSON.stringify(t))},[t,d]);const w=l=>{l.preventDefault(),v(route("spp.store"),{onSuccess:()=>{N("id_siswa","nominal_spp","data_spp"),localStorage.setItem("pag",10)}})},_=l=>{j(l),o("id_siswa",l.value)},O=(l,a,r)=>{f(i=>i.map(s=>Object.keys(s)[0]===l?{...s,[l]:s[l].map(n=>({...n,[a]:r?"lunas":null}))}:s))};return e.jsx(E,{user:b,children:e.jsx("div",{className:"mx-6 grid grid-cols-1 xl:grid-cols-1 grid-rows-1 grid-flow-row-dense ",children:e.jsx("div",{className:"xl:col-span-2",children:e.jsxs("div",{className:"card h-full shadow mb-4",children:[e.jsx("div",{className:"border-b border-gray-300 px-5 py-4 mb-3",children:e.jsx("h4",{children:"Siswa"})}),e.jsx("div",{className:"relative overflow-x-auto mt-3 mb-4 ",children:e.jsxs("form",{className:"mx-5 grid md:w-2/5",onSubmit:w,children:[e.jsx(J,{options:h,placeholder:"Pilih Siswa",value:x,onChange:_,isSearchable:!0,className:"mb-3"}),e.jsx(c,{message:m.id_siswa??"",className:"mb-3 -mt-1"}),e.jsx(C,{type:"number",placeholder:"Nominal SPP",value:S.nominal_spp,onChange:l=>o("nominal_spp",l.target.value)}),e.jsx(c,{message:m.nominal_spp??"",className:"mt-2"}),e.jsx("label",{className:"my-2",children:"Data SPP"}),e.jsx("div",{className:"flex justify-between",children:t.map((l,a)=>Object.keys(l).map((r,i)=>l[r].map((s,p)=>e.jsxs("div",{children:[e.jsx("h5",{children:r}),Object.keys(s).map((n,$)=>e.jsxs("p",{children:[e.jsx("input",{type:"checkbox",checked:s[n]==="lunas",onChange:k=>O(r,n,k.target.checked),className:"mr-2"}),n,": ",s[n]]},`${a}-${i}-${p}-${$}`))]},`${a}-${i}-${p}`))))}),e.jsxs("div",{className:"flex justify-between "+(m.data_spp?"":"mt-3"),children:[e.jsx(P,{href:route("spp.index"),className:"bg-violet-300 hover:bg-violet-200 py-2 no-underline hover:text-gray-700 px-3 rounded text-black font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:"bg-blue-600 hover:bg-blue-500 py-2 no-underline hover:text-gray-700 px-3 rounded text-white font-medium ",children:"Submit"})]})]})})]})})})})};export{R as default};
