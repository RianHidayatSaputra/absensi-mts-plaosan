import{r,j as t,x as b,S as G,A as f,G as K}from"./app-D0prQZBY.js";import{A as D}from"./AuthenticatedLayout-BFIASOEj.js";import{X as L}from"./index.es-DkYi5FOK.js";import"./sima-DtxtMQ44.js";const M=({filterText:u,onFilter:s})=>{const l=r.useRef(null);return r.useEffect(()=>{l.current&&l.current.focus()},[]),t.jsx("input",{type:"text",ref:l,id:"search",placeholder:"Filter By Name","aria-label":"Search Input",value:u,onChange:s})},W=()=>{const{setData:u,post:s,reset:l,processing:m}=K({file:""}),g=o=>{o.preventDefault(),s(route("import-guru"),{onSuccess:()=>{l("file");const i=document.querySelector('input[type="file"]');i&&(i.value=null)}})};return t.jsxs("form",{method:"post",onSubmit:o=>g(o),className:"flex p-2",encType:"multipart/form-data",children:[t.jsx("input",{type:"file",className:"form-control border h-6",onChange:o=>u("file",o.target.files[0]),required:!0}),t.jsx("button",{type:"submit",disabled:m,className:"hover:bg-green-200 py-1 no-underline hover:text-gray-700 px-2 ml-3 mb-5 rounded text-black text-sm font-medium",style:{backgroundColor:"#4EE454"},children:"Import"})]})},B=({auth:u,guru:s,perPage:l})=>{const[m,g]=r.useState([]),[o,i]=r.useState(s.current_page),[w,x]=r.useState(s.total),[h,v]=r.useState(l||10),[c,j]=r.useState(""),[y,k]=r.useState(c),[S,d]=r.useState(!0),p=r.useRef(null),N=s.data.filter(e=>e.nama&&e.nama.toLowerCase().includes(y.toLowerCase()));r.useEffect(()=>(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{k(c)}),()=>{clearTimeout(p.current)}),[c]),r.useEffect(()=>{x(s.total),d(!1)},[s]);const C=[{name:"#",cell:(e,a)=>(o-1)*h+a+1,maxwidth:"50px"},{name:"Nama",selector:e=>e.nama,cell:e=>t.jsx("div",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:e.nama}),sortable:!0,width:"200px"},{name:"NUPTK",selector:e=>e.nuptk?e.nuptk:"-",sortable:!0,width:"200px"},{name:"Jabatan",selector:e=>e.jabatan,sortable:!0,width:"200px"},{name:"Status Kepegawaian",selector:e=>e.status_kepegawaian,sortable:!0},{name:"Alamat",selector:e=>e.alamat,cell:e=>t.jsx("div",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:e.alamat}),sortable:!0,width:"350px"},{name:"Hari Kontrak",cell:e=>{var n=`${e.kontrak_guru}`.split(",");return(n[0]=="null"||n[0]=="")&&n.shift(),t.jsx("div",{className:"border-b border-gray-300 font-medium text-left py-4 li-hari",children:e.kontrak_guru==null||e.kontrak_guru==""?"Masuk Terus":t.jsx("ul",{className:"pl-4",children:n.map((I,F)=>t.jsx("li",{children:I},F))})})},sortable:!0},{name:"Nomor WhatsApp",selector:e=>e.no_wa,cell:e=>t.jsx("div",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:e.no_wa}),sortable:!0,width:"150px"},{name:"Aksi",cell:e=>t.jsx(b,{href:route("guru.edit",e.id),className:"bg-yellow-400 hover:bg-yellow-300 text-sm no-underline hover:text-gray-900 py-1 px-2 rounded text-black font-medium",children:"Edit"}),maxwidth:"50px"}],R=[...Array(h)].map((e,a)=>({id:`loading-${a}`,nama:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-24 rounded"}),nuptk:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded"}),jabatan:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-28 rounded"}),status_kepegawaian:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-32 rounded"}),alamat:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-40 rounded"}),aksi:t.jsx("div",{className:"animate-pulse bg-gray-300 h-6 w-16 rounded"})})),T=r.useCallback(e=>{g(e.selectedRows.map(a=>a.id))}),P=r.useMemo(()=>{const e=(a,n)=>{a.preventDefault(),window.confirm("Apakah kamu yakin akan menghapusnya?")&&f.get(route("guru.destroy",[n]))};return t.jsx("button",{onClick:a=>e(a,m),className:"bg-red-400 hover:bg-red-300 no-underline hover:text-gray-900 py-1 px-2 text-sm ml-3 rounded text-black font-mediums",children:"Hapus"})},[m]),A=r.useMemo(()=>t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx(b,{href:route("guru.create"),className:"bg-violet-300 hover:bg-violet-200 no-underline hover:text-gray-700 pt-2 px-3 rounded text-black font-medium",children:"Tambah"}),t.jsx(M,{onFilter:e=>j(e.target.value),filterText:c})]}),t.jsxs("div",{className:"mt-3 -ms-2",children:[t.jsx("div",{className:"w-80",children:t.jsx(W,{})}),t.jsx("div",{className:" -mt-20",children:t.jsx("a",{href:route("download-template-guru"),className:"hover:bg-green-200 py-2 no-underline hover:text-gray-700 px-3 rounded text-black text-sm font-medium",style:{backgroundColor:"#4EE454"},children:"Download Template"})})]})]}),[c]),_=e=>{d(!0),f.get(route("guru.index",{page:e,perPage:h}),{},{replace:!0,preserveState:!0,onSuccess:a=>{i(a.props.guru.current_page),x(a.props.guru.total),d(!1)}})},E=async(e,a)=>{v(e),d(!0),f.get(route("guru.index",{page:a,perPage:e}),{},{replace:!0,preserveState:!0,onSuccess:n=>{i(n.props.guru.current_page),x(n.props.guru.total),d(!1)}})},H={rowsPerPageText:"Count Rows",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Semua"};return t.jsxs(D,{user:u,children:[t.jsx(G,{title:"Guru"}),t.jsx("div",{className:"mx-6 grid grid-cols-1 xl:grid-cols-1 grid-rows-1 grid-flow-row-dense ",children:t.jsx("div",{className:"xl:col-span-2",children:t.jsx("div",{className:"card h-full shadow mb-5",children:t.jsx(L,{title:"Guru",columns:C,data:S?R:N,pagination:!0,paginationServer:!0,paginationTotalRows:w,paginationDefaultPage:o,onChangePage:_,onChangeRowsPerPage:E,selectableRows:!0,contextActions:P,onSelectedRowsChange:T,responsive:!0,highlightOnHover:!0,striped:!0,subHeader:!0,subHeaderComponent:A,paginationComponentOptions:H})})})})]})};export{B as default};
