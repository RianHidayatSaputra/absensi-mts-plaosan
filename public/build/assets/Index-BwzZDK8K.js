import{r as s,j as t,S as H,A as d}from"./app-NUb6NQg-.js";import{F as I,a as O,A as E}from"./AuthenticatedLayout-DncdzVuS.js";import{X as F}from"./index.es-CW1ClXb7.js";import{S as Y}from"./SelectOption-rORhdt3R.js";import{D as L}from"./index-D1N02F7Z.js";import"./sima-DtxtMQ44.js";import"./useIcons-bGyIZvFo.js";import"./objectWithoutProperties-Bdmk7Y0b.js";const{RangePicker:X}=L,U=({auth:f,alumnis:r,perPage:v})=>{const[x,w]=s.useState([]),[g,m]=s.useState(r.current_page),[j,p]=s.useState(r.total),[l,k]=s.useState(v||10),[b,o]=s.useState(!0),u=s.useRef([]),h=s.useRef(""),[i,c]=s.useState({dates:[],tahun_masuk:""});s.useEffect(()=>{p(r.total);const e=setTimeout(()=>{o(!1)},500);return()=>clearTimeout(e)},[r]);const S=e=>{e.preventDefault(),window.open(route("export-excel.rekap-alumni",{dates:u.current,tahun_masuk:h.current}),"_self")},R=e=>{if(Array.isArray(e)&&e.length===2&&e[0]&&e[1]){const a=e.map(n=>n.format("YYYY-MM-DD"));u.current=a,c(n=>({...n,dates:a}))}else u.current=null,c(a=>({...a,dates:null}))},A=()=>{const e=u.current,a=h.current;c({dates:e,tahun_masuk:a}),m(1),c(n=>({...n,tahun_masuk:a})),d.get(route("pindah-kelas.index"),{page:1,perPage:l,dates:e,tahun_masuk:a},{preserveState:!0,replace:!0})},y=[{name:"#",cell:(e,a)=>(g-1)*l+a+1,width:"80px"},{name:"NIS",selector:e=>e.nis,sortable:!0},{name:"Nama Siswa",selector:e=>e.nama_siswa,sortable:!0},{name:"Nama Ortu",selector:e=>e.nama_ortu,sortable:!0},{name:"No Ortu",selector:e=>e.no_ortu,sortable:!0},{name:"Tahun Masuk",selector:e=>e.tahun_masuk,sortable:!0}],C=[...Array(l)].map((e,a)=>({id:`loading-${a}`,alumnis:{nama_siswa:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-24 rounded"})}})),N=s.useCallback(e=>{w(e.selectedRows.map(a=>a.id))},[]),P=s.useMemo(()=>{const e=(a,n)=>{a.preventDefault(),window.confirm("Apakah kamu yakin akan menghapusnya?")&&d.get(route("pindah-kelas.destroy",[n]))};return t.jsx("button",{onClick:a=>e(a,x),className:"bg-red-400 hover:bg-red-300 no-underline hover:text-gray-900 py-1 px-2 text-md ml-3 rounded text-black font-mediums",children:"Hapus"})},[x]),_=s.useMemo(()=>t.jsx("div",{className:"w-full",children:t.jsx("div",{className:"w-full flex justify-between",children:t.jsxs("div",{className:" w-full flex justify-end",children:[t.jsx("div",{children:t.jsx(X,{onChange:e=>R(e),className:"mr-3 p-2"})}),t.jsxs(Y,{className:"h-10",onChange:e=>{h.current=e.target.value},children:[t.jsx("option",{value:"",children:"Tahun Masuk"}),t.jsx("option",{value:"2020",children:"2020"}),t.jsx("option",{value:"2021",children:"2021"}),t.jsx("option",{value:"2022",children:"2022"}),t.jsx("option",{value:"2023",children:"2023"}),t.jsx("option",{value:"2024",children:"2024"}),t.jsx("option",{value:"2025",children:"2025"}),t.jsx("option",{value:"2026",children:"2026"}),t.jsx("option",{value:"2027",children:"2027"}),t.jsx("option",{value:"2028",children:"2028"}),t.jsx("option",{value:"2029",children:"2029"}),t.jsx("option",{value:"2030",children:"2030"})]}),t.jsx("button",{onClick:A,className:"bg-indigo-600 h-9 hover:bg-indigo-500 ml-2 py-2 no-underline hover:text-gray-700 px-3 rounded text-white font-medium",children:t.jsx(I,{icon:O})}),t.jsx("button",{onClick:S,className:"bg-teal-400 hover:bg-teal-300 no-underline hover:text-gray-90 py-2 px-3 mb-5 ml-2 rounded text-black font-medium",children:"Export"})]})})}),[]),T=e=>{o(!0),d.get(route("pindah-kelas.index",{page:e,perPage:l,dates:i.dates,tahun_masuk:i.tahun_masuk}),{},{replace:!0,preserveState:!0,onSuccess:a=>{m(a.props.alumnis.current_page),p(a.props.alumnis.total),o(!1)}})},M=async(e,a)=>{k(e),o(!0),d.get(route("pindah-kelas.index",{page:a,perPage:e,dates:i.dates,tahun_masuk:i.tahun_masuk}),{},{replace:!0,preserveState:!0,onSuccess:n=>{m(n.props.alumnis.current_page),p(n.props.alumnis.total),o(!1)}})},D={rowsPerPageText:"Count Rows",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Semua"};return t.jsxs(E,{user:f,children:[t.jsx(H,{title:"Alumni"}),t.jsx("div",{className:"mx-6 grid grid-cols-1 xl:grid-cols-1 grid-rows-1 grid-flow-row-dense ",children:t.jsx("div",{className:"xl:col-span-2",children:t.jsx("div",{className:"card h-full shadow mb-4",children:t.jsx(F,{title:"Alumni",columns:y,data:b?C:r.data,pagination:!0,paginationServer:!0,paginationTotalRows:j,paginationDefaultPage:g,onChangePage:T,onChangeRowsPerPage:M,selectableRows:!0,contextActions:P,onSelectedRowsChange:N,responsive:!0,highlightOnHover:!0,striped:!0,subHeader:!0,subHeaderComponent:_,paginationComponentOptions:D})})})})]})};export{U as default};
