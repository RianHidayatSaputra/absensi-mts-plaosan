import{r as s,j as t,x as w,S as I,A as p}from"./app-DnD-Lx6E.js";import{A as L}from"./AuthenticatedLayout-C8xGjflI.js";import{X as _}from"./index.es-CIHnTPsv.js";import"./sima-DtxtMQ44.js";const M=({filterText:c,onFilter:a})=>{const n=s.useRef(null);return s.useEffect(()=>{n.current&&n.current.focus()},[]),t.jsx("input",{id:"search",ref:n,type:"text",placeholder:"Filter By Name","aria-label":"Search Input",value:c,onChange:a})},$=({auth:c,user:a,perPage:n})=>{const[g,b]=s.useState([]),[x,h]=s.useState(a.current_page),[v,d]=s.useState(a.total),[m,S]=s.useState(n||10),[l,y]=s.useState(""),[j,R]=s.useState(l),[f,o]=s.useState(!0),i=s.useRef(null),C=a.data.filter(e=>e.name&&e.name.toLowerCase().includes(j.toLowerCase()));s.useEffect(()=>(i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{R(l),o(!1)},500),()=>{clearTimeout(i.current)}),[l]),s.useEffect(()=>{d(a.total)},[a]);const T=[{name:"#",cell:(e,r)=>(x-1)*m+r+1,maxwidth:"50px"},{name:"Name",selector:e=>e.name,sortable:!0},{name:"Email",selector:e=>e.email,sortable:!0},{name:"Role",selector:e=>e.role,sortable:!0},{name:"Aksi",cell:e=>f?t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-32 rounded"}):t.jsx(w,{href:route("user.edit",e.id),className:"bg-yellow-400 hover:bg-yellow-300 text-sm no-underline hover:text-gray-900 py-1 px-2 rounded text-black font-medium ",children:"Edit"}),maxwidth:"50px"}],N=[...Array(m)].map((e,r)=>({id:`loading-${r}`,name:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-24 rounded"}),email:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-20 rounded"}),role:t.jsx("div",{className:"animate-pulse bg-gray-300 h-4 w-28 rounded"})})),P=s.useCallback(e=>{b(e.selectedRows.map(r=>r.id))},[]),k=s.useMemo(()=>{const e=(r,u)=>{r.preventDefault(),window.confirm("Apakah kamu yakin akan menghapusnya?")&&p.get(route("user.destroy",[u]))};return t.jsx("button",{onClick:r=>e(r,g),className:"bg-red-400 hover:bg-red-300 no-underline hover:text-gray-900 py-1 px-2 text-md ml-3 rounded text-black font-mediums",children:"Hapus"})},[g]),A=s.useMemo(()=>t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx(w,{href:route("user.create"),className:"bg-violet-300 hover:bg-violet-200 no-underline hover:text-gray-700 pt-2 px-3 rounded text-black font-medium",children:"Tambah"}),t.jsx(M,{onFilter:e=>y(e.target.value),filterText:l})]}),[l]),E=e=>{o(!0),p.get(route("user.index",{page:e,perPage:m}),{},{replace:!0,preserveState:!0,onSuccess:r=>{r.props.user&&(h(r.props.user.current_page),d(r.props.user.total)),o(!1)}})},F=async(e,r)=>{S(e),o(!0),p.get(route("user.index",{page:r,perPage:e}),{},{replace:!0,preserveState:!0,onSuccess:u=>{u.props.user&&(h(u.props.user.current_page),d(u.props.user.total)),o(!1)}})},H={rowsPerPageText:"Count Rows",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Semua"};return t.jsxs(L,{user:c,children:[t.jsx(I,{title:"User"}),t.jsx("div",{className:"mx-6 grid grid-cols-1 xl:grid-cols-1 grid-rows-1 grid-flow-row-dense ",children:t.jsx("div",{className:"xl:col-span-2",children:t.jsx("div",{className:"card h-full shadow mb-4 p-3",children:t.jsx(_,{title:"Users",columns:T,data:f?N:C,pagination:!0,paginationServer:!0,paginationTotalRows:v,paginationDefaultPage:x,onChangePage:E,onChangeRowsPerPage:F,selectableRows:!0,contextActions:k,onSelectedRowsChange:P,responsive:!0,highlightOnHover:!0,striped:!0,subHeader:!0,subHeaderComponent:A,paginationComponentOptions:H})})})})]})};export{$ as default};
