import{r as a,j as t,x as f,S as O,A as d}from"./app-DnD-Lx6E.js";import"./SelectOption-BuWM9_5_.js";import"./TextInput-DciK4BJh.js";import{A as M,F as b,e as X,g as B}from"./AuthenticatedLayout-C8xGjflI.js";import"./moment-C5S46NFB.js";import{X as J}from"./index.es-CIHnTPsv.js";import"./sima-DtxtMQ44.js";const K=({filterText:i,onFilter:r})=>{const n=a.useRef(null);return a.useEffect(()=>{n.current&&n.current.focus()},[]),t.jsx("input",{id:"search",ref:n,type:"text",placeholder:"Filter By Name","aria-label":"Search Input",value:i,onChange:r})},Y=({auth:i,spp:r,count_spp:n,perPage:j})=>{const[m,S]=a.useState([]),[x,h]=a.useState(r.current_page),[v,c]=a.useState(r.total),[w,C]=a.useState(j||10),[l,P]=a.useState(""),y=r.data.filter(e=>e.siswa.nama_siswa&&e.siswa.nama_siswa.toLowerCase().includes(l.toLowerCase())||e.siswa.nis.toLowerCase().includes(l.toLowerCase()));a.useEffect(()=>{c(r.total)},[r]);const R=[{name:"#",cell:(e,s)=>(x-1)*w+s+1,maxwidth:"20px"},{name:"Nama Siswa",selector:e=>e.siswa.nama_siswa,sortable:!0,maxwidth:"130px"},{name:"NIS",selector:e=>e.siswa.nis,sortable:!0,maxwidth:"20px"},{name:"Kelas",selector:e=>e.siswa.kelas,sortable:!0,maxwidth:"20px"},{name:"Nominal SPP",selector:e=>e.nominal_spp,sortable:!0,maxwidth:"50px"},{name:"Data SPP",cell:e=>{const s=JSON.parse(e.data_spp);return t.jsx("div",{className:"flex justify-between",children:s.map((o,F)=>{const g=Object.keys(o)[0],H=o[g];return t.jsxs("div",{children:[t.jsx("h5",{children:g}),H.map((u,L)=>t.jsx("div",{children:Object.keys(u).map((p,E)=>t.jsxs("p",{children:[u[p]!=null?t.jsx(b,{icon:X,className:"mr-2 text-green-500"}):t.jsx(b,{icon:B,className:"mr-2 text-red-500"}),p,":"," ",u[p]]},E))},L))]},F)})})},maxwidth:"700px"},{name:"Aksi",cell:e=>t.jsx(f,{href:route("spp.edit",e.id),className:"bg-yellow-400 hover:bg-yellow-300 text-sm no-underline hover:text-gray-900 py-1 px-2 rounded text-black font-medium",children:"Edit"}),maxwidth:"20px"}],N=a.useCallback(e=>{S(e.selectedRows.map(s=>s.id))},[]),k=a.useMemo(()=>{const e=(s,o)=>{s.preventDefault(),window.confirm("Apakah kamu yakin akan menghapusnya?")&&d.get(route("spp.destroy",[o]))};return t.jsx("button",{onClick:s=>e(s,m),className:"bg-red-400 hover:bg-red-300 no-underline hover:text-gray-900 py-1 px-2 text-md ml-3 rounded text-black font-mediums",children:"Hapus"})},[m]),A=a.useMemo(()=>t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx(f,{href:route("spp.create"),className:"bg-violet-300 hover:bg-violet-200 no-underline hover:text-gray-700 pt-2 px-3 rounded text-black font-medium",children:"Tambah"}),t.jsx(K,{onFilter:e=>P(e.target.value),filterText:l})]}),[l]),_=e=>{d.get(route("spp.index",{page:e,perPage:w}),{},{replace:!0,preserveState:!0,onSuccess:s=>{h(s.props.spp.current_page),c(s.props.spp.total)}})},T=async(e,s)=>{C(e),d.get(route("spp.index",{page:s,perPage:e}),{},{replace:!0,preserveState:!0,onSuccess:o=>{h(o.props.spp.current_page),c(o.props.spp.total)}})},I={rowsPerPageText:"Count Rows",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Semua"};return t.jsxs(M,{user:i,children:[t.jsx(O,{title:"Hari Libur"}),t.jsx("div",{className:"mx-6 grid grid-cols-1 xl:grid-cols-1 grid-rows-1 grid-flow-row-dense ",children:t.jsx("div",{className:"xl:col-span-2",children:t.jsx("div",{className:"card h-full shadow mb-4",children:t.jsx(J,{title:"SPP",columns:R,data:y,pagination:!0,paginationServer:!0,paginationTotalRows:v,paginationDefaultPage:x,onChangePage:_,onChangeRowsPerPage:T,selectableRows:!0,contextActions:k,onSelectedRowsChange:N,responsive:!0,highlightOnHover:!0,striped:!0,subHeader:!0,subHeaderComponent:A,paginationComponentOptions:I})})})})]})};export{Y as default};
